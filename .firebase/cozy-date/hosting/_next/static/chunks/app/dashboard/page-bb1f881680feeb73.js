(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4680:(e,s,t)=>{Promise.resolve().then(t.bind(t,5077))},5077:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>es});var a=t(5155),l=t(2115),r=t(6844),c=t(1880),n=t(6695),i=t(6101),d=t(6081),o=t(5185),m=t(5845),x=t(5503),h=t(1275),u=t(8905),p=t(3540),f="Checkbox",[j,g]=(0,d.A)(f),[y,v]=j(f),N=l.forwardRef((e,s)=>{let{__scopeCheckbox:t,name:r,checked:c,defaultChecked:n,required:d,disabled:x,value:h="on",onCheckedChange:u,form:f,...j}=e,[g,v]=l.useState(null),N=(0,i.s)(s,e=>v(e)),b=l.useRef(!1),k=!g||f||!!g.closest("form"),[A=!1,P]=(0,m.i)({prop:c,defaultProp:n,onChange:u}),T=l.useRef(A);return l.useEffect(()=>{let e=null==g?void 0:g.form;if(e){let s=()=>P(T.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[g,P]),(0,a.jsxs)(y,{scope:t,state:A,disabled:x,children:[(0,a.jsx)(p.sG.button,{type:"button",role:"checkbox","aria-checked":C(A)?"mixed":A,"aria-required":d,"data-state":M(A),"data-disabled":x?"":void 0,disabled:x,value:h,...j,ref:N,onKeyDown:(0,o.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.m)(e.onClick,e=>{P(e=>!!C(e)||!e),k&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),k&&(0,a.jsx)(w,{control:g,bubbles:!b.current,name:r,value:h,checked:A,required:d,disabled:x,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!C(n)&&n})]})});N.displayName=f;var b="CheckboxIndicator",k=l.forwardRef((e,s)=>{let{__scopeCheckbox:t,forceMount:l,...r}=e,c=v(b,t);return(0,a.jsx)(u.C,{present:l||C(c.state)||!0===c.state,children:(0,a.jsx)(p.sG.span,{"data-state":M(c.state),"data-disabled":c.disabled?"":void 0,...r,ref:s,style:{pointerEvents:"none",...e.style}})})});k.displayName=b;var w=e=>{let{control:s,checked:t,bubbles:r=!0,defaultChecked:c,...n}=e,i=l.useRef(null),d=(0,x.Z)(t),o=(0,h.X)(s);l.useEffect(()=>{let e=i.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==t&&s){let a=new Event("click",{bubbles:r});e.indeterminate=C(t),s.call(e,!C(t)&&t),e.dispatchEvent(a)}},[d,t,r]);let m=l.useRef(!C(t)&&t);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=c?c:m.current,...n,tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function C(e){return"indeterminate"===e}function M(e){return C(e)?"indeterminate":e?"checked":"unchecked"}var A=t(518),P=t(9434);let T=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(N,{ref:s,className:(0,P.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...l,children:(0,a.jsx)(k,{className:(0,P.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})})});T.displayName=N.displayName;var E=t(285),I=t(6126),R=t(1394),L=t(7223),B=t(8328),D=t(157);let H=(0,D.A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),z=(0,D.A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var O=t(1721),q=t(4504);let G=(0,D.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var V=t(3013),Z=t(6766),_=t(7481);function S(e){let{task:s,onToggleComplete:t,onDelete:r,onAddPhoto:c}=e,i="Tamara"===s.createdBy?"/img/tamara.png":"/img/carlos.png",d=(0,l.useRef)(null),{toast:o}=(0,_.dj)();return(0,a.jsxs)(n.Zp,{className:"transition-all duration-300 ".concat(s.completed?"bg-card/60 dark:bg-card/40":"bg-card"),children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(T,{id:"task-".concat(s.id),checked:s.completed,onCheckedChange:()=>t(s.id),"aria-label":'Mark "'.concat(s.title,'" as ').concat(s.completed?"incomplete":"complete"),className:"w-6 h-6"}),(0,a.jsx)(n.ZB,{className:"text-xl font-headline ".concat(s.completed?"line-through text-muted-foreground":""),children:s.title})]}),(0,a.jsx)(E.$,{variant:"ghost",size:"icon",onClick:()=>r(s.id),"aria-label":'Delete task "'.concat(s.title,'"'),className:"text-muted-foreground hover:text-destructive shrink-0",children:(0,a.jsx)(L.A,{className:"h-5 w-5"})})]}),s.description&&(0,a.jsx)(n.BT,{className:"pt-2 ".concat(s.completed?"line-through text-muted-foreground":""),children:s.description})]}),(0,a.jsxs)(n.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(B.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:(0,V.GP)(s.date,"PPP p")})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(H,{className:"mr-2 h-4 w-4"}),(0,a.jsx)(I.E,{variant:"secondary",children:s.category})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)(I.E,{className:"".concat({High:"bg-red-500/80 hover:bg-red-500",Medium:"bg-yellow-500/80 hover:bg-yellow-500",Low:"bg-green-500/80 hover:bg-green-500"}[s.priority]," text-white"),children:s.priority})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(O.A,{className:"mr-2 h-4 w-4"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Idea by:"}),(0,a.jsxs)(R.eu,{className:"h-6 w-6",children:[(0,a.jsx)(R.BK,{src:i,alt:s.createdBy}),(0,a.jsx)(R.q5,{children:s.createdBy.charAt(0)})]}),(0,a.jsx)("span",{className:"font-medium",children:s.createdBy})]})]})]}),s.notes&&(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"flex items-center text-sm font-medium mb-1",children:[(0,a.jsx)(q.A,{className:"mr-2 h-4 w-4 text-primary/80"}),"Notes"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap pl-6",children:s.notes})]})}),s.completed&&(0,a.jsxs)("div",{className:"w-full pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center w-full mb-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Memories"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(E.$,{variant:"outline",size:"sm",onClick:()=>{var e;null==(e=d.current)||e.click()},children:[(0,a.jsx)(G,{className:"mr-2 h-4 w-4"}),"Add Photo"]}),(0,a.jsx)("input",{type:"file",ref:d,onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/"))return void o({variant:"destructive",title:"Invalid File Type",description:"Please upload an image file (e.g., JPG, PNG, GIF)."});let l=new FileReader;l.onloadend=()=>{let e=l.result;c(s.id,e)},l.readAsDataURL(a),e.target&&(e.target.value="")},accept:"image/*",className:"hidden"})]})]}),s.photos&&s.photos.length>0?(0,a.jsx)("div",{className:"grid grid-cols-4 gap-2",children:s.photos.slice(0,4).map((e,t)=>(0,a.jsxs)("div",{className:"relative aspect-square",children:[(0,a.jsx)(Z.default,{src:e,alt:"Memory ".concat(t+1),width:100,height:100,className:"rounded-md object-cover w-full h-full"}),3===t&&s.photos.length>4&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-md",children:(0,a.jsxs)("span",{className:"text-white font-bold text-lg",children:["+",s.photos.length-4]})})]},t))}):(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"No photos added yet."})]})]})]})}var F=t(172),K=t(4301);let W=(0,D.A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var $=t(6553),J=t(5695);let U=(0,D.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),X=(0,D.A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Y=(0,D.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function Q(e){let{tasks:s}=e,{completedCount:t,tamaraIdeaCount:r,carlosIdeaCount:c,totalIdeas:i,tamaraProgress:d,carlosProgress:o}=(0,l.useMemo)(()=>{let e=s.filter(e=>e.completed).length,t=s.filter(e=>"Tamara"===e.createdBy).length,a=s.filter(e=>"Carlos"===e.createdBy).length,l=t+a;return{completedCount:e,tamaraIdeaCount:t,carlosIdeaCount:a,totalIdeas:l,tamaraProgress:l>0?t/l*100:0,carlosProgress:l>0?a/l*100:0}},[s]);return(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(U,{className:"text-primary"}),(0,a.jsx)("span",{children:"Our Couple Goals"})]})}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-8 text-center sm:flex-row sm:justify-around sm:items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(X,{className:"h-8 w-8 text-green-500"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:t}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plans Completed"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)(Y,{className:"h-8 w-8 text-yellow-500"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:i}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Ideas"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium mb-2 text-center",children:"Idea Contribution"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-tamara",children:"Tamara's Ideas"}),(0,a.jsx)("span",{className:"text-sm font-bold",children:r})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-carlos",children:"Carlos's Ideas"}),(0,a.jsx)("span",{className:"text-sm font-bold",children:c})]})]}),(0,a.jsx)("div",{className:"mt-2 w-full h-4 rounded-full flex overflow-hidden bg-muted",children:(0,a.jsxs)("div",{className:"relative w-full h-4 flex",children:[(0,a.jsx)("div",{className:"h-full bg-tamara transition-all duration-500 relative flex justify-center items-center",style:{width:"".concat(d,"%")},children:(0,a.jsx)("span",{className:"absolute bottom-full mb-1 text-xs font-bold text-tamara",children:"Tamara"})}),(0,a.jsx)("div",{className:"h-full bg-carlos transition-all duration-500 relative flex justify-center items-center",style:{width:"".concat(o,"%")},children:(0,a.jsx)("span",{className:"absolute bottom-full mb-1 text-xs font-bold text-carlos",children:"Carlos"})})]})})]})]})]})}var ee=t(4303);function es(){let[e,s]=(0,l.useState)(!1),{user:t,isLoading:n}=(0,$.J)(),{tasks:i,isLoading:d,addTask:o,toggleComplete:m,deleteTask:x,addPhoto:h}=(0,ee.s)(),u=(0,J.useRouter)();(0,l.useEffect)(()=>{n||t||u.push("/")},[t,n,u]);let{upcomingTasks:p,completedTasks:f}=(0,l.useMemo)(()=>({upcomingTasks:i.filter(e=>!e.completed).sort((e,s)=>e.date.getTime()-s.date.getTime()),completedTasks:i.filter(e=>e.completed).sort((e,s)=>s.date.getTime()-e.date.getTime())}),[i]);return n||d||!t?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background",children:(0,a.jsx)(F.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,a.jsx)(r.Y,{}),(0,a.jsxs)("main",{className:"flex-1 p-4 md:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4 mb-6 sm:flex-row sm:justify-between sm:items-center",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-headline",children:"Our Shared Plans"}),(0,a.jsxs)(E.$,{onClick:()=>s(!0),children:[(0,a.jsx)(K.A,{className:"mr-2"}),"Add Plan"]})]}),(0,a.jsx)(c.r,{isOpen:e,onOpenChange:s,onAddTask:o}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(Q,{tasks:i})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-headline text-primary",children:"Upcoming Dates & Plans"}),p.length>0?(0,a.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,a.jsx)(S,{task:e,onToggleComplete:m,onDelete:x,onAddPhoto:h},e.id))}):(0,a.jsxs)("div",{className:"text-center py-12 px-6 bg-card rounded-lg shadow-sm",children:[(0,a.jsx)(W,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"No upcoming plans. Time to add something fun!"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-headline text-primary/80",children:"Sweet Memories"}),f.length>0?(0,a.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,a.jsx)(S,{task:e,onToggleComplete:m,onDelete:x,onAddPhoto:h},e.id))}):(0,a.jsxs)("div",{className:"text-center py-12 px-6 bg-card rounded-lg shadow-sm",children:[(0,a.jsx)(W,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-muted-foreground",children:"No completed tasks yet. Let's make some memories!"})]})]})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[35,175,949,77,13,702,567,802,427,441,684,358],()=>s(4680)),_N_E=e.O()}]);